<div class="dashboard-container" [ngStyle]="{'justify-content': selectedBusiness==null ? 'center' : 'initial'}">
  <ng-template #noBusinessSelected>
    <div class="no-business">
      <h1>{{ 'noBusinessSelected.title' | translate }}</h1>
      <a routerLink="/create" class="get-started-link">
        <p>{{'noBusinessSelected.getStarted' | translate}} <span>{{'noBusinessSelected.own' | translate}}</span> {{'noBusinessSelected.business' | translate}}</p>
      </a>
      <h2>{{'noBusinessSelected.or' | translate}}</h2>
      <p>{{'noBusinessSelected.askSupervisor' | translate}}</p>
    </div>
  </ng-template>

  <div class="business-list" *ngIf="selectedBusiness; else noBusinessSelected">
    <h2>{{'businessList.title' | translate}}</h2>
    <a class="add-button sims-input" routerLink="/create">{{'businessList.addNew' | translate}}</a>
    <app-list class="hover-anim" [items]="associatedBusinesses" [selectedElement]="selectedBusiness" fieldName="name"
      (itemClick)="onBusinessClick($event)"></app-list>
  </div>


  <div class="business-info" *ngIf="selectedBusiness">
    <div class="business">
      <div class="title">
        <div class="content f-23">
          {{selectedBusiness.name}}
        </div>
        <div class="icons f-1">
          <button class="icon-button red pointer" (click)="deleteSelectedBusiness()"><i class="delete fa-regular fa-trash-can" title="{{'delete' | translate}}"></i></button>
        </div>
      </div>
      <div class="details">
        <h2>{{'businessInfo.title' | translate}}</h2>
        <div class="table-container">
          <div class="tableRow tableHeader">
            <div class="tableCell">{{'owner' | translate}}</div>
            <div class="tableCell">{{'businessName' | translate}}</div>
            <div class="tableCell">{{'registrationDate' | translate}}</div>
          </div>
          <div class="tableRow">
            <div class="tableCell">{{selectedBusiness.owner.fullName}}</div>
            <div class="tableCell">{{selectedBusiness.name}}</div>
            <div class="tableCell">{{selectedBusiness.businessRegistrationDate}}</div>
          </div>
          <div class="tableRow tableHeader">
            <div class="tableCell">{{'taxNumber' | translate}}</div>
            <div class="tableCell">{{'headquarters' | translate}}</div>
            <div class="tableCell">{{'simsRegistrationDate' | translate}}</div>
          </div>
          <div class="tableRow">
            <div class="tableCell">{{selectedBusiness.taxNumber}}</div>
            <div class="tableCell">{{selectedBusiness.headQuarters}}</div>
            <div class="tableCell">{{selectedBusiness.simsRegistrationDate}}</div>
          </div>
        </div>
      </div>

      <div class="title">
        {{'employeeData.title' | translate}}
      </div>

      <div class="details">
        <ng-template #noEmployeeSelected>
          <h2>{{'businessInfo.noEmployeeSelected' | translate}}</h2>
        </ng-template>
      
        <div *ngIf="selectedEmployee != null; else noEmployeeSelected">
          <h2>
            {{selectedEmployee.fullName}}
            <button class="icon-button red pointer" (click)="removeEmployee(selectedEmployee)" title="{{'businessInfo.removeEmployee' | translate}}">
              <i class="fa-solid fa-user-xmark"></i>
            </button>
          </h2>
        </div>
      
        <div class="table-container">
          <div class="tableRow tableHeader">
            <div class="tableCell">{{'employeeData.placeOfBirth' | translate}}</div>
            <div class="tableCell">{{'employeeData.dateOfBirth' | translate}}</div>
          </div>
          <div class="tableRow">
            <div class="tableCell">{{selectedEmployee?.placeOfBirth || "-"}}</div>
            <div class="tableCell">{{selectedEmployee?.dateOfBirth || "-"}}</div>
          </div>
      
          <div class="tableRow tableHeader">
            <div class="tableCell">{{'employeeData.idCardNumber' | translate}}</div>
            <div class="tableCell">{{'employeeData.socSecNumber' | translate}}</div>
          </div>
          <div class="tableRow">
            <div class="tableCell">{{selectedEmployee?.identityCardNumber || "-"}}</div>
            <div class="tableCell">{{selectedEmployee?.socialSecurityNumber || "-"}}</div>
          </div>
      
          <div class="tableRow tableHeader">
            <div class="tableCell">{{'employeeData.homeAddress' | translate}}</div>
            <div class="tableCell">{{'employeeData.phoneNumber' | translate}}</div>
          </div>
          <div class="tableRow">
            <div class="tableCell">{{selectedEmployee?.homeAddress || "-"}}</div>
            <div class="tableCell">{{selectedEmployee?.phoneNumber || "-"}}</div>
          </div>
      
          <div class="tableRow tableHeader">
            <div class="tableCell">{{'employeeData.emailAddress' | translate}}</div>
            <div class="tableCell">{{'employeeData.citizenship' | translate}}</div>
          </div>
          <div class="tableRow">
            <div class="tableCell">{{selectedEmployee?.email || "-"}}</div>
            <div class="tableCell">{{selectedEmployee?.citizenship || "-"}}</div>
          </div>
        </div>
      </div>

    </div>

    


    <div class="inventoryContainer">
      <div class="create">
        <p>{{'inventory.create' | translate}}</p>
        <button class="sims-input inventoryCreateButton" routerLink="{{selectedBusiness.id}}/inventory/create"><i class="fa-solid fa-plus"></i></button>
      </div>
      <ng-template #noInventoryFound>
        <p>{{'inventory.notFound' | translate}}</p>
      </ng-template>


      <div class="inventories" *ngIf="inventories; else noInventoryFound">
        <div class="inventory" *ngFor="let inventory of inventories" >
          <div class="cardTitle">
            <p>{{inventory.name}}</p>
            <div class="icons">
              <a routerLink="/{{selectedBusiness.id}}/inventory/{{inventory.id}}"><i class="view fa-regular fa-eye" title="Megtekintés"></i></a>
              <button class="icon-button red pointer" (click)="deleteInventory(inventory)"><i class="fa-regular fa-trash-can" title="Törlés"></i></button>
            </div>
          </div>
          <div class="cardContent">
            <div class="inventory-details">
              <div class="table-container">
                <div class="tableRow tableHeader">
                  <div class="tableCell">{{'inventory.name' | translate}}</div>
                  <div class="tableCell">{{'inventory.addr' | translate}}</div>
                  <div class="tableCell">{{'inventory.productCount' | translate}}</div>
                </div>
                <div class="tableRow">
                  <div class="tableCell">{{inventory.name}}</div>
                  <div class="tableCell">{{inventory.address}}</div>
                  <div class="tableCell">{{inventory.products.size || 0}}</div>
                </div>
            
                <div class="tableRow tableHeader">
                  <div class="tableCell">{{'inventory.manager' | translate}}</div>
                  <div class="tableCell">{{'inventory.managerPhone' | translate}}</div>
                  <div class="tableCell">{{'inventory.managerEmail' | translate}}</div>
                </div>
                <div class="tableRow">
                  <div class="tableCell">{{inventory.managerName}}</div>
                  <div class="tableCell">{{inventory.managerPhone}}</div>
                  <div class="tableCell">{{inventory.managerEmail}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>

  <div class="employee-list" *ngIf="selectedBusiness">
    <div class="table">
      <h2>{{'employeeData.employees' | translate}}</h2>
      <button *ngIf="selectedBusiness.owner.id === authenticatedUser?.id" routerLink="/{{selectedBusiness.id}}/add-employee" class="sims-input">{{'businessList.addNew' | translate}}</button>
      <app-list class="hover-anim" [items]="selectedBusiness.associates || null" [selectedElement]="selectedEmployee"
        fieldName="fullName" (itemClick)="onEmployeeClick($event)"></app-list>
    </div>
  </div>
</div>